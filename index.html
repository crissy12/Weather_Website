<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Weather Website</title>
  <link rel="stylesheet" href="main.css">
  <crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="flex-container">
        <header class="flex-item">
            <h1> My Weather Forecast </h1>
            <form onsubmit="return false;">
                <input type = "text" id = "txt-input" placeholder="Enter city or Zip code" autofocus>
                <button type = "submit" id = "submit-btn"> Submit</button>
            </form>
        </header>
        <main class="flex-item">
            <h2>Today's Weather</h2>
            <div class= "todays-weather">
                <div class ="today-weather-icon"> <img src="/assets/icons8-summer-96.png" alt="Sunny Icon"></div>
                <h2 id="today-date">18,July,2022</h2>
                <h3 id="today-location">New York</h3>
                <h2 id="today-temp">75&deg</h2>
                
            </div>
        </main>
        <aside class="daily-weather">
            <h2> Daily Weather </h2>
            <div class="first-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>
            <div class="second-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div> </div>
            <div class="third-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>
            <div class="fourth-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>
            <div class="fifth-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>
            <div class="six-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>
            <div class="seven-day"> 
                <div class = "date"> 18,July,2022</div>
                <div class = "city">New York</div>
                <div class = "temp"> 75&deg; </div>
                <div class = "daily-weather-icon"> Weather Icon Here</div>
            </div>  
        </aside>
        
        <footer class="flex-item">
            My Footer
        </footer>
    </div>

<script>
    document.getElementById('submit-btn').addEventListener("click", myWeatherFunc);    
    
    async function myWeatherFunc(){
        const myData = await myGeoFunc()
        let {lat,lon} = myData[0];
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=8b74e0431259fed66686425ae2b54b55`);
        const weatherData = await response.json();
        document.getElementById('today-location').textContent = weatherData.name
        document.getElementById('today-temp').textContent = Math.round(((1.8 * (parseInt(weatherData.main.temp) -273)) + 32)) + '\xB0'
    } 
   async function myGeoFunc() {
        let URL = 'https://api.openweathermap.org/geo/1.0/direct?q='+document.getElementById('txt-input').value+'&limit=1&appid=8b74e0431259fed66686425ae2b54b55'
        const response = await fetch(URL);
        const data = await response.json();
        return data          
   } 
</script>

</body>
</html>


<!-- const data = await fetch(URL)
            .then(response => {
                return response.json();
            })
            .then(geoJSON => {
                return geoJSON;
            });  -->